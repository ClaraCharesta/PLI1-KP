<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Laporan Shift RMFM5</title>
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/sidebar.css">
  <link rel="stylesheet" href="/css/topbar.css">
  <link rel="stylesheet" href="/css/KCM5.css"> <!-- bisa pake style sama -->
</head>
<body>
<%- include('partials/sidebar') %>

<div class="main">
  <%- include('partials/topbar', { title: "Laporan Shift RMFM5" }) %>

  <div class="content">

    <div class="header-box">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Cari No.Ref / Nama / Tanggal...">
        <button id="btnSearch">Search</button>
      </div>
      <button id="btnAdd" class="btn-add">+ Add</button>
    </div>

    <div class="table-wrapper">
      <table class="table">
        <thead>
          <tr>
            <th>No</th>
            <th>Tanggal</th>
            <th>Shift</th>
            <th>No.Ref</th>
            <th>Dibuat Oleh</th>
            <th>Personil (851A)</th>
            <th>Shift (851A)</th>
            <th>Personil (851B)</th>
            <th>Shift (851B)</th>
            <th>Personil (852A)</th>
            <th>Shift (852A)</th>
            <th>Personil (852B)</th>
            <th>Shift (852B)</th>
            <th>Cuti</th>
            <th>Verifikasi Kasi</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tbodyData">
          <% if(data && data.length>0){ %>
            <% data.forEach((row,index)=>{ %>
              <tr data-id="<%= row.id %>" data-noref="<%= row.no_ref %>">
                <td><%= index+1 %></td>
                <td><%= row.tanggal %></td>
                <td><%= row.shift_kode %></td>
                <td><%= row.no_ref %></td>
                <td><%= row.dibuat_oleh %></td>
                <td><%= row.personil_851a || "-" %></td>
                <td><%= row.shift_851a || "-" %></td>
                <td><%= row.personil_851b || "-" %></td>
                <td><%= row.shift_851b || "-" %></td>
                <td><%= row.personil_852a || "-" %></td>
                <td><%= row.shift_852a || "-" %></td>
                <td><%= row.personil_852b || "-" %></td>
                <td><%= row.shift_852b || "-" %></td>
                <td><%= row.cuti || "-" %></td>
                <td>
                  <input type="checkbox" class="chk-approve" data-id="<%= row.id %>"
                    <% if(row.is_approved){ %> checked disabled <% } %> >
                  <span><%= row.is_approved ? "Approved" : "Belum di-approve" %></span>
                </td>
                <td>
                  <button class="btn-edit">Edit</button>
                  <button class="btn-del">Hapus</button>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr><td colspan="16" style="text-align:center;">Data belum tersedia</td></tr>
          <% } %>
        </tbody>
      </table>
    </div>

  </div>
</div>

<script src="/js/RMFM5.js"></script>
</body>
</html>