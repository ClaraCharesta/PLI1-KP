<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Laporan Shift KCM5</title>
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/sidebar.css">
  <link rel="stylesheet" href="/css/topbar.css">
  <link rel="stylesheet" href="/css/KCM5.css">
</head>
<body>
<%- include('partials/sidebar') %>
<div class="main">
  <%- include('partials/topbar', { title: "Laporan Shift KCM5" }) %>
  <div class="content">

    <div class="header-box">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Cari No.Ref / Nama / Tanggal...">
        <button id="btnSearch">Search</button>
      </div>
      <button id="btnAdd" class="btn-add">+ Add</button>
    </div>

    <div class="table-wrapper">
      <table class="table">
        <thead>
          <tr>
            <th>No</th><th>Tanggal</th><th>Shift</th><th>No.Ref</th><th>Dibuat Oleh</th>
            <th>Personil (841)</th><th>Shift (841)</th>
            <th>Personil (842A)</th><th>Shift (842A)</th>
            <th>Personil (842B)</th><th>Shift (842B)</th>
            <th>Cuti</th><th>Verifikasi Kasi</th><th>Aksi</th>
          </tr>
        </thead>
        <tbody id="tbodyData">
          <% if (data && data.length > 0) { %>
            <% data.forEach((row,index)=>{ %>
              <tr data-id="<%= row.id %>">
                <td><%= index+1 %></td>
                <td><%= row.tanggal %></td>
                <td><%= row.shift_kode %></td>
                <td><%= row.no_ref %></td>
                <td><%= row.dibuat_oleh %></td>
                <td><%= row.personil_841a || "-" %></td>
                <td><%= row.shift_841a || "-" %></td>
                <td><%= row.personil_842a || "-" %></td>
                <td><%= row.shift_842a || "-" %></td>
                <td><%= row.personil_842b || "-" %></td>
                <td><%= row.shift_842b || "-" %></td>
                <td><%= row.cuti || "-" %></td>
                <td>
                  <input type="checkbox" class="chk-approve" data-id="<%= row.id %>"
                  <% if(row.is_approved){ %> checked disabled <% } %> >
                  <span><%= row.is_approved ? "Approved" : "Belum di-approve" %></span>
                </td>
                <td>
                  <button class="btn-edit" onclick="window.location.href='/laporan-shift/kcm5/edit/<%= row.id %>'">Edit</button>
                  <button class="btn-del">Hapus</button>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr><td colspan="14" style="text-align:center;">Data belum tersedia</td></tr>
          <% } %>
        </tbody>
      </table>
    </div>

  </div>
</div>
<script src="/js/KCM5.js"></script>
</body>
</html>
